# 技术选型文档

环境：MACOS、IOS 13.0+、Xcode12.0+
语言：Object-C
框架：UIKit，Foundation，IOS沙盒机制，NSOperation、NSOperationQueue。



## 1 UIKit框架

UIKit 框架提供了 iOS  App 所需的基础架构。它提供了用于实施界面的窗口和视图架构，用于向 App 提供多点触控和其他类型输入的事件处理基础架构，以及管理用户、系统和 App 之间互动所需的主运行循环。该框架提供的其他功能包括动画支持、文档支持、绘图和打印支持、当前设备的相关信息、文本管理和显示、搜索支持、辅助功能支持、App 扩展支持和资源管理。



## 2 Foundation框架

Foundation框架提供了字符串、数值的管理、容器及枚举、分布式计算、事件循环、URL 与数据流操作、国际化，以及其他与图形用户界面没有直接关系的功能。其中类和常数常用“NS”前缀来标志。



## 3 沙盒机制

出于安全考虑，iPhone对于安装在上面的应用程序有所限制，这个限制就是应用程序只能在为该改程序创建的文件系统中读取文件，不可以去其它地方访问，此区域被成为沙盒，所以所有的非代码文件都要保存在此，例如图像，图标，声音，映像，属性列表，文本文件等。总体来说沙盒就是一种独立、安全、封闭的空间。我们可以使用NSFileManager管理文件以实现本地持久化。 

#### 目录结构

沙盒机制根据访问权限和功能区别分为不同的目录: 

document，library（包含 caches 和preferences），tmp，.app。

- document: 保存App运行时生成的 需要持久化的数据，iTunes会自动备份 该目录；通常用于存放可以对外共享的文件。
- library: 这个目录下有两个目录

> - caches: 一般存储的是缓存文件，例如图片视频等，此目录下的文件不会再应用程序退出时删除，在手机备份的时候，iTunes不会备份该目录。
> - preferences: 保存应用程序的所有偏好设置iOS的Settings(设置)，我们不应该直接在这里创建文件，而是需要通过NSUserDefault这个类来访问应用程序的偏好设置。iTunes会自动备份该文件目录下的内容.

- tmp: 临时文件目录，在程序重新运行和开机的时候，会清空tmp文件夹。
- .app: 这个就是可运行的应用文件，带有签名的文件包，包含应用程序代码和静态数据.

#### 特点

- 每个应用程序都在自己的沙盒内.

- 不能随意跨越自己的沙盒去访问别的应用程序沙盒的内容.

- 应用程序向外请求或接收数据都需要经过权限认证.



## 4 多线程编程

NSOperation、NSOperationQueue 是苹果提供的一套多线程解决方案。

基于GCD的完全面向对象封装，比 GCD 更 简单易用、代码可读性也更高。

###   NSOperation特点 

​	GCD的OO 封装 

​	支持 GCD 的部分功能 

​	支持指定任务依赖 

​	支持设定并发数

​	支持取消任务/KVO监听任务状态

